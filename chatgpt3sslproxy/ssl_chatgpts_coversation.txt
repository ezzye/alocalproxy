Give me the python code for a https proxy with unit tests showing it works

Here is an example of a HTTPS proxy implemented in Python, along with some unit tests:
